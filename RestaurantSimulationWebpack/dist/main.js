(()=>{"use strict";const e={순댓국:1e3,해장국:2e3};class t{constructor(e,t,i){this.name=e,this.isCook=t,this.order=i,this.li=document.querySelector(`#chef-wrapper #chef-list #${e}`)}async render(){const e=this.li;e&&(e.innerText=`${this.name}\t${this.isCook?"요리중":"대기"}\t${this.order?"주문"+this.order.number:""}`)}async cookDishes(t){t.status="요리중",await t.update(),await t.renderCooking(),this.order=t,await this.render();const i=e[t.name];return new Promise(((e,s)=>{setTimeout((async()=>{await t.removeCooking(),this.isCook=!1,this.order=null,await this.render(),e(t)}),i??1e3)}))}}const i=[];class s{constructor(e,t,i,s){this.name=e,this.serveTime=t,this.isServing=i,this.dishes=s,this.li=document.querySelector(`#server-wrapper #server-list #${e}`)}async serveDishes(e){e.status="서빙중",await e.update(),await e.renderServing(),this.dishes=e,await this.render();const t=this.serveTime;return new Promise(((i,s)=>{setTimeout((async()=>{await e.remove(),await e.removeServing(),this.isServing=!1,this.dishes=null,await this.render(),e.status="완료",i(e)}),t)}))}async render(){const e=this.li;e&&(e.innerText=`${this.name}\t${this.isServing?"서빙중":"대기"}\t${this.dishes?"주문"+this.dishes.number:""}`)}}const n=[],r=document.querySelector("#order-wrapper #order-list"),o=document.querySelector("#chef-wrapper #cooking-list"),h=document.querySelector("#server-wrapper #serving-list"),a=(()=>{let e=1;return()=>e++})(),c=[];class u{li=null;cookingLi=null;servingLi=null;constructor(e,t){this.number=a(),this.name=e,this.status=t,this.render()}render=()=>{this.li=document.createElement("li"),this.li.setAttribute("id","order"+this.number),this.li.innerText=`주문${this.number}\t${this.name}\t${this.status}`,r.appendChild(this.li)};async update(){this.li.innerText=`주문${this.number}\t${this.name}\t${this.status}`}async remove(){this.li.remove(),this.li=null}async renderCooking(){this.cookingLi=document.createElement("li"),this.cookingLi.setAttribute("id","cooking"+this.number),this.cookingLi.innerText=`주문${this.number}\t${this.name}\t${this.status}`,o.appendChild(this.cookingLi)}async removeCooking(){this.cookingLi.remove(),this.cookingLi=null}async renderServing(){this.servingLi=document.createElement("li"),this.servingLi.setAttribute("id","serving"+this.number),this.servingLi.innerText=`주문${this.number}\t${this.name}\t${this.status}`,h.appendChild(this.servingLi)}async removeServing(){this.servingLi.remove(),this.servingLi=null}}const l=[];document.querySelector(".btns-order").addEventListener("click",(async e=>{const t=e.target.value;t&&(e=>{const t=new u(e,"대기");c.push(t)})(t)})),i.push(new t("대장금",!1,null),new t("백주부",!1,null)),n.push(new s("홍길동",1e3,!1,null),new s("핑핑이",2e3,!1,null)),i.forEach((e=>e.render())),n.forEach((e=>e.render())),setInterval((async()=>{const e=c.shift();if(!e)return;const t=await new Promise(((e,t)=>{!function t(){const s=i.find((e=>!1===e.isCook));s?(s.isCook=!0,e(s)):setTimeout(t,200)}()})),s=await t.cookDishes(e),r=await new Promise(((e,t)=>{!function t(){const i=n.find((e=>!1===e.isServing));i?(i.isServing=!0,e(i)):setTimeout(t,200)}()})),o=await r.serveDishes(s);l.push(o)}),1e3)})();
//# sourceMappingURL=main.js.map